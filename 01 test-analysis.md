# Тест-анализ
 + [Замечания к документации/заданию](#notes)
 + [Ссылка на требования в графическом виде и блок-схему](#schema)
 + [Критерии приемки](#criteria)

## <a name="notes"></a> Замечания к документации/заданию

- Единица измерения финансов. Предлагаю рассмотреть возможность замены миллионов на тысячи.
- Возраст. Несовершеннолетние тоже могут брать кредит? При тестировании допускаю, что люди, младше 18 лет не могут брать кредит.
- Доход и запрашиваемая сумма указана в миллионах. Рекомендую рассмотреть вопрос об изменении на тысячи. При тестировании буду исходить, что шаг 0.001
- Срок погашения указан в годах. Рекомендую рассмотреть возможность изменения на месяцы. При тестировании буду исходить из того, что кредит можно взять на определенное количество полных лет (шаг - 1)
- Нет информации об изменении/сохранении модификатора при цели "Автокредит"
- В документации есть противоречия. Есть формулировки "до 10 млн". В таких случаях исхожу из того, что до 10 млн включительно. Т.к. максимальная сумма, которую можно выдать - 10 млн.

 <a name="schema"></a> Ссылка на требования в графическом виде и блок-схему
- 
- [требования и блок-схема](https://raw.githubusercontent.com/Zheleznikov/credit-model/main/Credit%20model.drawio.png "Кликай и смотри")


## <a name="criteria"></a> Критерии приемки
- ### [01] Допустимые значения входных параметров
    - [01.1] Возраст [not negative int], лет. Добавил уточнение, что возраст не может быть меньше 18
    - [01.2] Пол [F, M] [female,male]
    - [01.3] Источник дохода [пассивный доход, наёмный работник, собственный бизнес, безработный] [passive income, employee, own business, unemployed]
    - [01.4] Доход за последний год [int], млн
    - [01.5] Кредитный рейтинг [-2, -1, 0, 1, 2]
    - [01.6] Запрошенная сумма [0.1 .. 10], млн
    - [01.7] Срок погашения [1..20], лет
    - [01.8] Цель [ипотека, развитие бизнеса, автокредит, потребительский] [mortgage, business development, car loan, personal loan]
    
- ### [02]Условия выдачи кредита
    - [02.1] Если возраст превышает пенсионный возраст на момент возврата кредита, кредит не выдаётся
    - [02.2] Если результат деления запрошенной суммы на срок погашения в годах более трети годового дохода, кредит не выдаётся
    - [02.3] Если кредитный рейтинг -2, кредит не выдаётся
    - [02.4] Если в источнике дохода указано "безработный", кредит не выдаётся
    - [02.5] Если годовой платёж (включая проценты) больше половины дохода, кредит не выдаётся
    
- ### [03] Рассчет суммы кредита
    - [03.1] Если работают несколько условий по сумме кредита - выбирается наименьшая
    - [03.2] При пассивном доходе выдаётся кредит на сумму до 1 млн, наёмным работникам - до 5 млн, собственное дело - до 10 млн
    - [03.3] При кредитном рейтинге -1 выдаётся кредит на сумму до 1 млн, при 0 - до 5 млн, при 1 или 2 - до 10 млн
    
- ### [04]Условия изменения базовой ставки
  - [04.1] Все модификаторы процентной ставки суммируются, применяется итоговый модификатор
  - #### по параметру "Цель"
    - [04.2.1] ипотека (-2%)
    - [04.2.2] развития бизнеса (-0.5%)
    - [04.2.3] потребительский кредит (+1.5%)
    
  - #### по параметру "Кредитный рейтинг"
    - [04.3.1] +1.5% для кредитного рейтинга  -1
    - [04.3.2] 0% для кредитного рейтинга 0
    - [04.3.3] -0.25% для кредитного рейтинга 1
    - [04.3.4] -0.75% для кредитного рейтинга 2

  - #### по параметру "Источник дохода"
    - [04.4.1] Для пассивного дохода ставка повышается на 0.5%
    - [04.4.2] для наемных работников ставка снижается на 0.25% 
    - [04.4.3] с собственным бизнесом ставка повышается на 0.25%
    
  - #### по параметру "Запрашиваемая сумма"
    - [04.5.1] Модификатор в зависимости от запрошенной суммы рассчитывается по формуле `[-log(sum)]`
    
- ### [05] Способ расчета годового платежа
    - [05.1] Базовая ставка - 10%
    - [05.2] Годовой платеж по кредиту определяется по следующей формуле:

`(<сумма кредита> * (1 + <срок погашения> * (<базовая ставка> + <модификаторы>))) / <срок погашения>`
- ### [06] Выходные данные после рассмотрения заявки
    - [06.1] Кредит выдаётся/не выдаётся
    - [06.2] Годовой платеж по кредиту
  
## <a name="json"></a> Входные/выходные параметры

Соотношения параметров и их наименования в теле запроса

    {
      1. возраст - "age",   возможные значения: [18 ...]
      2. пол - "sex", возможные значения: [male, female]
      3. источник дохода - "incomingSource", [passive income, employee, own business, unemployed]
      4. доход за последний год - "incomeForLastYear", [0.1...]
      5. кредитный рейтинг - "creditRating", [-2, -1, 0, 1, 2]
      6. запрашиваемая сумма - "requestedAmount",  [0.1 ... 10]
      7. срок кредита - "loanRepaymentTime", [1...20]
      8. цель - "goal" [mortgage, business development, car loan, personal loan]
    }



### Пример запроса с параметрами для одобрения получения кредита

    {
      "age": 30,
      "sex": "male",
      "incomingSource": "employee",
      "incomeForLastYear": 12,
      "creditRating": 2,
      "requestedAmount": 5,
      "loanRepaymentTime": 10,
      "goal": "mortgage"
    }


### Пример ответа
#### Кредит не одобрен
    {
    "isCreditApproved": false
    }
#### Кредит одобрен
    {
    "isCreditApproved": true,
    "yearPayment": 1.931
    }

       
