# Тест-дизайн
 + [Ограничения](#boundaries)
 + [[01] Допустимые значения входных параметров](#internaldata)
 + [[02] Условия выдачи кредита](#conditions)
 + [[03] Базовая валидация суммы](#basecalc)


## <a name="boundaries"></a> Ограничения
- Проверяем только бизнес-логику расчета
    - Корректен ли расчет
    - Одобрен/ Не одобрен кредит
  
- Не проводим специфичные для API тесты с изменением методов запроса, дублированием/отсутствием параметров итд
- Для того чтобы остаться в рамках выполнения тестового задания, допускаю:
  - что параметр "пол" не может принимать значения отличные от "female", "male"
  - что параметр "источник дохода" не может принимать значения не из списка: [passive income, employee, own business, unemployed]
  - что параметр "кредитный рейтинг" не может принимать значения не из списка: [-2, -1, 0, 1, 2]
  - что параметр "цель" не может принимать значения не из списка: [mortgage, business development, car loan, personal loan]
  - в параметре "срок погашения" можно указывать только количество полных лет
  - параметр "доход за последний год" имеет шаг 0.1
  - параметр "запрашиваемая сумма" имеет шаг 0.1
  - изменения процентной ставки имеет шаг 0.25
  
## <a name="internaldata"></a> [01] Допустимые значения входных параметров (подбор параметров)
- проверяем весь раздел на уровне юнит-тестов
- используем технику "парные значения"
- тестовые данные брать из файла "01 base validation pairwise.txt"
    
      age:          -1, 0, 17, 18, 30
      sex:          unknown, female
      incomingSource: beautiful eyes, own business
      incomeForLastYear: 0, -0.1, 1
      creditRating:   3, -3, 0, -1
      requestedAmount:   0, -0.5, 10.1, 32766, 5, 4.5
      loanRepaymentTime:   -1, 0, 21, 1, 19, 20
      goal:   party, car loan, personal loan
  

- [01.1] Возраст, лет.
- [01.2] Пол [F, M] [female,male]
- [01.3] Источник дохода [пассивный доход, наёмный работник, собственный бизнес, безработный] [passive income, employee, own business, unemployed]
- [01.4] Доход за последний год [int], млн
- [01.5] Кредитный рейтинг [-2, -1, 0, 1, 2]
- [01.6] Запрошенная сумма [0.1 .. 10], млн
- [01.7] Срок погашения [1..20], лет
- [01.8] Цель [ипотека, развитие бизнеса, автокредит, потребительский] [mortgage, business development, car loan, personal loan]


## <a name="conditions"></a> [02] Условия выдачи кредита
### [02.1] Если возраст превышает пенсионный возраст на момент возврата кредита, кредит не выдаётся
- Проверяем на уровне юнит-тестов  
- Проверяем отдельно для каждого пола момент наступления пенсионного возраста. Используем техники КЭ и ГЗ.
  
### [02.2] Если результат деления запрошенной суммы на срок погашения в годах более трети годового дохода, кредит не выдаётся
    - запрашиваемая сумма / срок погашения > годовой доход / 3 - не выдаем
    - запрашиваемая сумма / срок погашения <= годовой доход / 3 - выдаем

    Тестовые данные для генерации
    incomeForLastYear: 0.1, 1, 5, 10
    requestedAmount:  0.1, 1, 5, 9.9, 10
    loanRepaymentTime:   1, 2, 10, 19, 20
- Для проверки такого неравенства с 3 параметрами используем технику парных значений. Для подбора отдельно взятого значения используем КЭ И ГЗ.
- Проверить, когда ровно, например 2.4 / 4 = 1.8 / 3 - должны выдать
  - Проверяем на уровне юнит-тестов
  
###  [02.3] Если кредитный рейтинг -2, кредит не выдаётся
- проверяем на уровне юнит-тестов
### [02.4] Если в источнике дохода указано "безработный", кредит не выдаётся
- проверяем на уровне юнит-тестов
### [02.5] Если годовой платёж (включая проценты) больше половины дохода, кредит не выдаётся
    годовой процент + (модификаторы) > доход / 2 - не выдаем
    годовой процент + (модификаторы) <= доход / 2 - выдаем

## <a name="basecalc"></a> Базовая валидация суммы 
## [03.1] Если работают несколько условий по сумме кредита - выбирается наименьшая
- проверяются на уровне СТ. Автотесты
- проверяются все сочетания разных значений параметров

##  [03.2] При пассивном доходе выдаётся кредит на сумму до 1 млн, наёмным работникам - до 5 млн, собственное дело - до 10 млн
- проверяется на уровне юнит-тестов
- для каждого вида дохода подбираются значения по техникам КЭ и ГЗ
## [03.3] При кредитном рейтинге -1 выдаётся кредит на сумму до 1 млн, при 0 - до 5 млн, при 1 или 2 - до 10 млн
- проверяется на уровне юнит-тестов
- для каждого кредитного рейтинга подбираются значения по техникам КЭ и ГЗ

## <a name="rate"></a> [04]Условия изменения базовой ставки
- ### 
  - Проверяется на уровне юнит-тестов
  - Изменение процентной ставки по отдельным параметрам проверяется без использования специальных техник, на уровне `10 - 2 = 8`
  
## [04.1] Все модификаторы процентной ставки суммируются, применяется итоговый модификатор
 - Проверяется на уровне юнит-тестов
- значения подбираются по технике парных значений

## <a name="howto"></a> [05] Способ расчета годового платежа
## - [05.2] Годовой платеж по кредиту определяется по следующей формуле:

`(<сумма кредита> * (1 + <срок погашения> * (<базовая ставка> + <модификаторы>))) / <срок погашения>`

- проверяется на уровне СТ. Автотесты
- комбинация значений подбирается по технике парных значений. Отдельные значения подбираются по технике граничных значений
- сгенерированные тестовые данные - в 


    age:          10, 17, 18, 19, 59, 60, 61, 64, 65, 66
    sex:          male, female, unknown
    incomingSource: passive income, employee, own business, unemployed, pale blue eyes
    incomeForLastYear: 0.1, 0.9, 5.2, 10.5, 12, 20, 100
    creditRating:   -2,-1, 0, 1, 2, -3, 3
    requestedAmount:  0.1, 0.5, 0.9, 1, 1.1, 3, 4.9, 5, 5.1, 7, 9.9, 10, 10.1, 14 
    loanRepaymentTime:   1, 2, 10, 19, 20
    goal:   party, car loan, personal loan, mortgage, business development

### [06] Выходные данные после рассмотрения заявки
  - проверяем в ходе проверок бизнес-логики в других тестах
